version: '3.8'

services:
  email-mcp-server:
    build: .
    container_name: email-mcp-server
    environment:
      - EMAIL_ADDRESS=${EMAIL_ADDRESS}
      - EMAIL_PASSWORD=${EMAIL_PASSWORD}
      - IMAP_HOST=${IMAP_HOST:-imap.gmail.com}
      - IMAP_PORT=${IMAP_PORT:-993}
      - SMTP_HOST=${SMTP_HOST:-smtp.gmail.com}
      - SMTP_PORT=${SMTP_PORT:-587}
    volumes:
      # Mount .env file if it exists
      - ./.env:/app/.env:ro
    stdin_open: true
    tty: true
    restart: "no"  # Don't auto-restart since MCP controls the lifecycle
    networks:
      - mcp-network

networks:
  mcp-network:
    driver: bridge